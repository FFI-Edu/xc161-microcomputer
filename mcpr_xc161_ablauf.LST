C166 COMPILER V7.53.0.0, MCPR_XC161_ABLAUF                                                 11/18/2013 15:21:49 PAGE 1   


C166 COMPILER V7.53.0.0, COMPILATION OF MODULE MCPR_XC161_ABLAUF
OBJECT MODULE PLACED IN mcpr_xc161_ablauf.OBJ
COMPILER INVOKED BY: C:\Program Files (x86)\Keil\C166\BIN\C166.EXE mcpr_xc161_ablauf.c MODV2 COMPACT BROWSE MODV2 DEBUG 
                    -TABS(2) 

 stmt lvl     source

    1         #include <XC161.h>
    2         #include "Platform_types.h"
    3         #include "mcpr_xc161_lcd.h"
    4         
    5         void led_output (uint8 led);
    6         uint16 read_keys();
    7          
    8          
    9                           /****************/
   10                           /*     main     */
   11                           /****************/     
   12         void main (void) {
   13  1              // ========
   14  1         uint16 key_state;
   15  1         uint16 cycles             = 0;
   16  1         uint16 temperature        = 0;
   17  1         uint16 no_key             = 0x0000;
   18  1         uint8 last_key_state_up   = 0x00;
   19  1         uint8 last_key_state_down = 0x00;
   20  1         uint8 last_lcd_set        = 0x00; //only last 2 bits important
   21  1              // ========
   22  1         lcd_init();
   23  1         while(1) { 
   24  2            key_state = read_keys();
   25  2            led_output(((uint8) key_state)  |  ((uint8) (key_state>>8)));
   26  2            // LCD BL
   27  2            lcd_backlight_controller(key_state, &last_key_state_up, &last_key_state_down, &last_lcd_set);
   28  2            // LCD TEXT
   29  2            lcd_writestatus(&cycles,&temperature);
   30  2            cycles++;
   31  2            if(cycles>60000)
   32  2               cycles=0;
   33  2         }
   34  1      }
   35          
   36         void led_output (uint8 led) {
   37  1         IC2 = led;
   38  1      }
   39          
   40         uint16 read_keys() {
   41  1         int i        =0, j=0;
   42  1         uint16 state = 0;
   43  1         DP7_P6  = 1;
   44  1         P7_P6   = 0;
   45  1         for(i=0; i<4; i++) {
   46  2            IC3 = 1 << i;
   47  2            for(j=0; j<100; j++);  //auf Transistoren warten
   48  2            state = state<<4;
   49  2            state |= ~(P5) & 0xF;
   50  2         }  
   51  1         return state;
   52  1      }


C166 COMPILER V7.53.0.0, MCPR_XC161_ABLAUF                                                 11/18/2013 15:21:49 PAGE 2   

MODULE INFORMATION:   INITIALIZED  UNINITIALIZED
  CODE SIZE        =         204     --------
  NEAR-CONST SIZE  =    --------     --------
  FAR-CONST SIZE   =    --------     --------
  HUGE-CONST SIZE  =    --------     --------
  XHUGE-CONST SIZE =    --------     --------
  NEAR-DATA SIZE   =    --------     --------
  FAR-DATA SIZE    =    --------     --------
  XHUGE-DATA SIZE  =    --------     --------
  IDATA-DATA SIZE  =    --------     --------
  SDATA-DATA SIZE  =    --------     --------
  BDATA-DATA SIZE  =    --------     --------
  HUGE-DATA SIZE   =    --------     --------
  BIT SIZE         =    --------     --------
  INIT'L SIZE      =    --------     --------
END OF MODULE INFORMATION.


C166 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
